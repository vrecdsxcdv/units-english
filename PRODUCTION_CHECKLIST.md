# Production Checklist - Units English

## ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- [x] PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Neon) –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- [x] Prisma —Å—Ö–µ–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- [x] –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- [x] –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞–Ω—ã

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- [x] NextAuth –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [x] Email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥)
- [x] –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
- [x] OAuth –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞ (Google, Yandex)
- [x] –ó–∞—â–∏—Ç–∞ –æ—Ç –±–∞–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- [x] Placement —Ç–µ—Å—Ç (20 –≤–æ–ø—Ä–æ—Å–æ–≤)
- [x] –£—Ä–æ–∫–∏ A1, B1, B2
- [x] AI Tutor (OpenAI GPT-4)
- [x] –°–∏—Å—Ç–µ–º–∞ streak (–∫–∞–∫ –≤ Duolingo)
- [x] –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [x] –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

### SEO
- [x] Meta —Ç–µ–≥–∏
- [x] Open Graph
- [x] Structured Data (JSON-LD)
- [x] Dynamic metadata –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

---

## ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º

### 1. Environment Variables (.env)

**–¢–µ–∫—É—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–ª–æ–∫–∞–ª—å–Ω—ã–µ):**
```bash
DATABASE_URL="postgresql://..."  # ‚úÖ –ì–æ—Ç–æ–≤–æ
DIRECT_URL="postgresql://..."    # ‚úÖ –ì–æ—Ç–æ–≤–æ
NEXTAUTH_SECRET="..."            # ‚úÖ –ì–æ—Ç–æ–≤–æ
NEXTAUTH_URL="http://localhost:3000"  # ‚ö†Ô∏è –ò–ó–ú–ï–ù–ò–¢–¨
OPENAI_API_KEY="sk-proj-..."     # ‚úÖ –ì–æ—Ç–æ–≤–æ
```

**–ß—Ç–æ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å:**

1. **NEXTAUTH_URL** - –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ production URL:
   ```bash
   NEXTAUTH_URL="https://units-english.ru"
   # –∏–ª–∏ –≤–∞—à –¥–æ–º–µ–Ω
   ```

2. **Email –ø—Ä–æ–≤–∞–π–¥–µ—Ä** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
   - –°–µ–π—á–∞—Å: Resend (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ)
   - –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞: –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ–º–µ–Ω –≤ Resend
   - –î–æ–±–∞–≤–∏—Ç—å –≤ .env:
   ```bash
   RESEND_API_KEY="re_..."  # –ø–æ–ª—É—á–∏—Ç—å –Ω–∞ resend.com
   RESEND_FROM_EMAIL="Units English <noreply@units-english.ru>"
   ```

3. **OAuth Credentials** (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ):
   ```bash
   GOOGLE_CLIENT_ID="..."
   GOOGLE_CLIENT_SECRET="..."
   YANDEX_CLIENT_ID="..."
   YANDEX_CLIENT_SECRET="..."
   ```

### 2. –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

**–¢–µ–∫—É—â–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã:**
- `admin@units-english.ru`
- `lifematvej9@gmail.com`
- `bahanke678@gmail.com`

**–§–∞–π–ª—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
1. `src/app/admin-dashboard-secure-panel-2024/page.tsx` (—Å—Ç—Ä–æ–∫–∞ 46)
2. `src/app/api/admin/users/route.ts` (—Å—Ç—Ä–æ–∫–∞ 12)
3. `src/app/api/admin/ban-user/route.ts` (—Å—Ç—Ä–æ–∫–∞ 12)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –£–¥–∞–ª–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ email –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º
- –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ –∞–¥–º–∏–Ω—Å–∫–∏–µ email
- –ò–∑–º–µ–Ω–∏—Ç—å –ø—É—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –Ω–∞ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 3. –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –£–¥–∞–ª–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º!

```bash
npx tsx clear-users.ts
```

–¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:
- alice@test.com, bob@test.com, –∏ —Ç.–¥.
- –ü–∞—Ä–æ–ª—å: `password123`

### 4. API Keys & Security

**OpenAI API Key:**
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏–º–∏—Ç —Ä–∞—Å—Ö–æ–¥–æ–≤ –≤ OpenAI Dashboard
- ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–≤–æ—Ç—É –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
- ‚ö†Ô∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å rate limiting –¥–ª—è AI Tutor

**Database:**
- ‚úÖ Neon PostgreSQL (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ: 512 MB)
- ‚ö†Ô∏è –ü—Ä–∏ –±–æ–ª—å—à–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ - –æ–±–Ω–æ–≤–∏—Ç—å —Ç–∞—Ä–∏—Ñ

### 5. Git & Secrets

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:**

–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
- `.env` –ù–ï –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (‚úÖ –ø—Ä–∞–≤–∏–ª—å–Ω–æ)
- API –∫–ª—é—á–∏ –ù–ï –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã (‚úÖ –ø—Ä–∞–≤–∏–ª—å–Ω–æ)

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–¥ –ø—É—à–µ–º:**
```bash
git status
# –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ .env –Ω–µ tracked
```

### 6. Build & Deploy

**–õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
npm run build
npm start
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- –ù–µ—Ç –æ—à–∏–±–æ–∫ —Å–±–æ—Ä–∫–∏
- –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω–∞

### 7. Performance

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- ‚úÖ Image optimization –≤–∫–ª—é—á–µ–Ω (Next.js)
- ‚úÖ Dynamic imports –≥–¥–µ –Ω—É–∂–Ω–æ
- ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ‚ö†Ô∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

### 8. Monitoring

**–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:**
- Error tracking (Sentry / LogRocket)
- Analytics (Google Analytics / Plausible)
- Uptime monitoring (UptimeRobot)
- Database monitoring (Neon Dashboard)

---

## üìã Deployment Steps

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

```bash
# 1. –£–¥–∞–ª–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
npx tsx clear-users.ts

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å production build
npm run build

# 3. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
npm start
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å http://localhost:3000
```

### 2. Environment Variables –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ

–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ Vercel/Railway/etc:

```bash
DATABASE_URL="postgresql://..."
DIRECT_URL="postgresql://..."
NEXTAUTH_SECRET="JxzNCVdfXpRSVfMH6dCbMOV7f5dRt5S6qIWr+Yxf+0I="
NEXTAUTH_URL="https://units-english.ru"
OPENAI_API_KEY="sk-proj-..."
RESEND_API_KEY="re_..."  # –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ
RESEND_FROM_EMAIL="Units English <noreply@units-english.ru>"
```

### 3. Deploy

**Vercel (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Vercel CLI
npm i -g vercel

# Deploy
vercel --prod
```

**Railway:**
```bash
# –í Railway Dashboard:
# 1. New Project
# 2. Deploy from GitHub
# 3. Add Environment Variables
# 4. Deploy
```

### 4. Post-Deploy

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å AI Tutor
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å email (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, reset password)
6. –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## üîí Security Checklist

- [x] –ü–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è (bcrypt)
- [x] Email verification –≤–∫–ª—é—á–µ–Ω–∞
- [x] CSRF protection (NextAuth)
- [x] SQL injection protection (Prisma)
- [ ] Rate limiting –¥–ª—è API (TODO)
- [ ] Captcha –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (TODO - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [x] Secure cookies (production)
- [x] XSS protection (React)

---

## üìä Capacity Planning

**–¢–µ–∫—É—â–∏–µ –ª–∏–º–∏—Ç—ã (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã):**

1. **Neon Database:**
   - Storage: 512 MB
   - Compute: Shared
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—Å—ã–ø–∞–µ—Ç –ø—Ä–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

2. **Vercel:**
   - 100 GB bandwidth/month
   - Serverless Functions: 100 GB-hours

3. **OpenAI:**
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–∏–º–∏—Ç $10-20/–º–µ—Å—è—Ü
   - ~1000 –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ GPT-4o

**–ü—Ä–∏ —Ä–æ—Å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- –û–±–Ω–æ–≤–∏—Ç—å Neon –¥–æ –ø–ª–∞—Ç–Ω–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞ (~$20/–º–µ—Å)
- –£–≤–µ–ª–∏—á–∏—Ç—å OpenAI –ª–∏–º–∏—Ç
- –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø–ª–∞—Ç–Ω—ã–π Vercel (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

---

## ‚úÖ Final Checklist

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —É–±–µ–¥–∏—Ç—å—Å—è:

- [ ] –í—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —É–¥–∞–ª–µ–Ω—ã
- [ ] NEXTAUTH_URL –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ production
- [ ] –ê–¥–º–∏–Ω—Å–∫–∏–µ email –æ–±–Ω–æ–≤–ª–µ–Ω—ã (—É–¥–∞–ª–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ)
- [ ] Email –ø—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] OpenAI –ª–∏–º–∏—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] Production build —É—Å–ø–µ—à–µ–Ω
- [ ] Environment variables –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥
- [ ] Deploy –≤—ã–ø–æ–ª–Ω–µ–Ω
- [ ] –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ production
- [ ] Monitoring –Ω–∞—Å—Ç—Ä–æ–µ–Ω

---

## üÜò Troubleshooting

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞:**
```bash
npx prisma db push
# –†–∞–∑–±—É–¥–∏—Ç—å Neon database
```

**NextAuth –æ—à–∏–±–∫–∏:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å NEXTAUTH_URL (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å production URL)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å NEXTAUTH_SECRET

**Email –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å RESEND_API_KEY
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ–º–µ–Ω –≤ Resend
- –í dev —Ä–µ–∂–∏–º–µ –∫–æ–¥—ã –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å

**OpenAI –æ—à–∏–±–∫–∏:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–≤–æ—Ç—É
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API key
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–∏–º–∏—Ç—ã

---

**–ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É! üöÄ**
