# ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Speechly AI Tutor

> –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏ —Ä–µ—à–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º —Å AI —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–æ–º

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OpenAI API

### 1. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [platform.openai.com](https://platform.openai.com/)
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏–ª–∏ –≤–æ–π–¥–∏—Ç–µ
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **API Keys** (–ª–µ–≤–æ–µ –º–µ–Ω—é)
4. –ù–∞–∂–º–∏—Ç–µ **Create new secret key**
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á (–æ–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!)

### 2. –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á –≤ –ø—Ä–æ–µ–∫—Ç

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
OPENAI_API_KEY=sk-–≤–∞—à-–∫–ª—é—á-–∑–¥–µ—Å—å
```

### 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

```bash
npm run dev
```

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "Sorry, I encountered an error"

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

#### 1. **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç OPENAI_API_KEY**

**–°–∏–º–ø—Ç–æ–º—ã:**

- –û—à–∏–±–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12): `Failed to get response`

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞ .env.local
ls -la .env.local

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å OPENAI_API_KEY)
cat .env.local
```

#### 2. **–ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á**

**–°–∏–º–ø—Ç–æ–º—ã:**

- –û—à–∏–±–∫–∞: "–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ API"
- –í –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞: `Error 401`

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∫–ª—é—á–∞ –≤ `.env.local`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª—é—á –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `sk-`
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á –Ω–∞ [platform.openai.com](https://platform.openai.com/)

#### 3. **–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤**

**–°–∏–º–ø—Ç–æ–º—ã:**

- –û—à–∏–±–∫–∞: "–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AI"
- –†–∞–±–æ—Ç–∞–ª–æ, –Ω–æ –ø–æ—Ç–æ–º –ø–µ—Ä–µ—Å—Ç–∞–ª–æ

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1 –º–∏–Ω—É—Ç—É
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã –Ω–∞ [platform.openai.com/usage](https://platform.openai.com/usage)
3. –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å, –µ—Å–ª–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å –∫—Ä–µ–¥–∏—Ç—ã

#### 4. **–ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö**

**–°–∏–º–ø—Ç–æ–º—ã:**

- –û—à–∏–±–∫–∞: "–û—à–∏–±–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"
- –í –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞: `Prisma error P...`

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
npx prisma db push

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
npm run dev
```

#### 5. **–ù–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞**

**–°–∏–º–ø—Ç–æ–º—ã:**

- –û—à–∏–±–∫–∞: "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É AI"
- –î–æ–ª–≥–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –æ—à–∏–±–∫–æ–π

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall/VPN
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥—É—é —Å–µ—Ç—å

---

## üêõ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

### –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª, –≥–¥–µ –∑–∞–ø—É—â–µ–Ω `npm run dev`:

```bash
# –ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ —Å –æ—à–∏–±–∫–∞–º–∏:
Chat API error:
Error details:
OPENAI_API_KEY is not set
Database error:
```

### –õ–æ–≥–∏ –±—Ä–∞—É–∑–µ—Ä–∞

–û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí Console:

```bash
# –ò—â–∏—Ç–µ:
Chat error:
Failed to get response
Network error
```

---

## üìä –¢–∏–ø—ã –æ—à–∏–±–æ–∫ –∏ –∏—Ö –∫–æ–¥—ã

| –ö–æ–¥ | –û—à–∏–±–∫–∞          | –ü—Ä–∏—á–∏–Ω–∞        | –†–µ—à–µ–Ω–∏–µ                  |
| --- | --------------- | -------------- | ------------------------ |
| 401 | Invalid API key | –ù–µ–≤–µ—Ä–Ω—ã–π –∫–ª—é—á  | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ OPENAI_API_KEY |
| 429 | Rate limit      | –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç | –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1 –º–∏–Ω—É—Ç—É       |
| 500 | Server error    | –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏           |
| 503 | Network error   | –ù–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞  | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ    |

---

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ Speechly –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: "–ü—Ä–∏–≤–µ—Ç"
3. –î–æ–ª–∂–µ–Ω –ø—Ä–∏–π—Ç–∏ –æ—Ç–≤–µ—Ç –æ—Ç AI

### –ü—Ä–æ–≤–µ—Ä–∫–∞ API –Ω–∞–ø—Ä—è–º—É—é

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª test-api.js:
const openai = require('openai');

const client = new openai.OpenAI({
  apiKey: process.env.OPENAI_API_KEY
});

async function test() {
  const response = await client.chat.completions.create({
    model: 'gpt-4o-mini',
    messages: [{ role: 'user', content: 'Hello' }]
  });
  console.log(response.choices[0].message.content);
}

test();
```

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ:
node test-api.js
```

---

## üîß –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ API –∫–ª—é—á–∞** –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∑–∞–ø—Ä–æ—Å–∞
2. **–î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏** –≤ –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞
3. **–°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –æ—à–∏–±–∫–∏:
   - Rate limit
   - Invalid API key
   - Network errors
   - Database errors
   - JSON parsing errors
4. **–ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º
5. **Suggestions** –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏ (–ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞, –∑–∞–¥–∞—Ç—å –¥—Ä—É–≥–æ–π –≤–æ–ø—Ä–æ—Å)

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

- `src/app/api/tutor/chat/route.ts` ‚Äî —É–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API
- `src/components/tutor/ChatInterface.tsx` ‚Äî —É–ª—É—á—à–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è production:

1. **Rate limiting:**

```typescript
// –î–æ–±–∞–≤—å—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const rateLimit = new Map<string, number>();

if (rateLimit.get(userId) > 20) {
  return NextResponse.json({ error: "Too many requests" }, { status: 429 });
}
```

2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**

```typescript
// –ö—ç—à–∏—Ä—É–π—Ç–µ —á–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã
const cache = new Map<string, string>();

if (cache.has(message)) {
  return NextResponse.json({
    response: cache.get(message),
    cached: true,
  });
}
```

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**

```typescript
// –õ–æ–≥–∏—Ä—É–π—Ç–µ –≤—Å–µ –æ—à–∏–±–∫–∏ –≤ –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å
Sentry.captureException(error);
```

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:

1. –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ –ø–æ–ª–Ω—ã–µ –æ—à–∏–±–∫–∏ –≤ production
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∫–ª—é—á–µ–π
3. –î–æ–±–∞–≤—å—Ç–µ rate limiting
4. –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –≤—Å–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

---

## üìû –ü–æ–º–æ—â—å

### –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –±—Ä–∞—É–∑–µ—Ä–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `.env.local` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å –Ω–∞ [platform.openai.com](https://platform.openai.com/)
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π API –∫–ª—é—á
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall/VPN

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:

- [OpenAI API Documentation](https://platform.openai.com/docs)
- [OpenAI API Status](https://status.openai.com/)
- [Prisma Documentation](https://www.prisma.io/docs)

---

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-11-15  
**–í–µ—Ä—Å–∏—è:** 1.0

---

## üéØ –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

```bash
# 1. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á: https://platform.openai.com/api-keys

# 2. –°–æ–∑–¥–∞–π—Ç–µ .env.local
echo "OPENAI_API_KEY=sk-–≤–∞—à-–∫–ª—é—á" > .env.local

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
npm run dev

# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É Speechly
```

**–ì–æ—Ç–æ–≤–æ!** üéâ






